# 虚拟机类加载机制
## 类加载的生命周期
生命周期从类加载到虚拟机内存中开始，到从内存里卸载结束。总共包括七个阶段，分别是：加载（Loading），验证（Verification），准备（Preparation），解析（Resolution），初始化（Initialization），使用（Using），卸载（Unloading）。其中，验证，准备，解析这三个阶段统称为连接（Linking）。
### 虚拟机必须进行初始化的五种情况
#### 类加载的顺序了解一下？
类生命周期能确定的顺序：加载，验证，准备，初始化。即，一个类完成了初始化，必然已经完成了加载，验证，准备。  
不能确定顺序的：解析。因为解析工作可以放在初始化之后开始，例如动态绑定。  
虚拟机没有规定啥时候要进行加载环节，倒是初始化，严格规定了**有且仅有**以下5类场景，需要进行类初始化。

#### 必须进行初始化的几个场景。
虚拟机规范中写的下面5种情况必须进行初始化操作。

1. 遇到new，getstatic，putstatic，invokestatic这4条字节码指令。//三个和static有关，一个是new关键字。
2. 使用java.lang.reflect包进行反射调用，且该类尚未初始化。//反射了解一下？
3. 初始化一个类的时候，发现父类还没初始化，先触发父类初始化。
4. 当启动虚拟机时，用户指定了要执行的主类（包含Main方法的那个），虚拟机会优先初始化这个类。
5. 当使用**JDK1.7**的动态语言支持时，如果一个`java.lang.infoke.MethodHandle`实例最后解析结果是`REF_getStatic`，`REF_pubStatic`，`REF_invokeStatic`方法句柄，并且这个句柄对应的类没有进行过初始化，则先触发其初始化。//JDK动态语言支持初始化了解一下？
