# 虚拟机类加载机制
## 类加载的生命周期
生命周期从类加载到虚拟机内存中开始，到从内存里卸载结束。总共包括七个阶段，分别是：加载（Loading），验证（Verification），准备（Preparation），解析（Resolution），初始化（Initialization），使用（Using），卸载（Unloading）。其中，验证，准备，解析这三个阶段统称为连接（Linking）。
### 虚拟机必须进行初始化的五中情况
从上图中可以看出，在使用类之前是必须进行初始化的。然而初始化之前又自然必须进行类的加载，验证，和准备；反倒是解析并不一定，因为Java支持运行时绑定，可以在初始化之后再开始。一个类的执行过程中，有可能导致其他类激活进入加载，验证...等生命周期。虚拟机规范中写的下面5种情况必须进行初始化操作。

1. 遇到new，getstatic，putstatic，invokestatic这4条字节码指令。**//三个和static有关，一个是new关键字。**
2. 使用java.lang.reflect包进行反射调用，且该类尚未初始化。**//反射了解一下？**
3. 初始化一个类的时候，发现父类还没初始化，先触发父类初始化。
4. 当启动虚拟机时，用户指定了要执行的主类（包含Main方法的那个），虚拟机会优先初始化这个类。
5. 当使用**JDK1.7**的动态语言支持时，如果一个`java.lang.infoke.MethodHandle`实例最后解析结果是`REF_getStatic`，`REF_pubStatic`，`REF_invokeStatic`方法句柄，并且这个句柄对应的类没有进行过初始化，则先触发其初始化。**//JDK动态语言支持初始化了解一下？**
