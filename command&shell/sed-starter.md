sed是一种功能强大流编辑器，能完美配合正则表达式对文本进行处理。它能够自动编辑一个或者多个文件，简化文件的反复操作。sed有一种“模式空间”，可以在处理文本时将正在处理的行存储到临时的缓冲区中。处理的内容都是缓冲区的内容而非源文件。处理完成以后，更新的内容会被输出到屏幕，然后处理下一行，不断重复直到文件的末尾。这样，源文件本身不会发生任何改变，除非用户手动将变更的内容重定向到本地磁盘上。

## sed命令
### 命令格式
```shell
sed [options] 'command' file(s)
sed [options] -f scriptfile file(s)
```

### 常用命令
下面列举了一些常用的sed指令：
```shell
y/source-chars/dest-chars/ 
a text #在当前的行下面附加一行，text代表附加的文本。
a\ #在当前的行下面附加一行，\的作用是允许插入的文本换行。
i text #在当前行前面插入一行，text代表附加的文本。
i\ #在当前行前面插入一行，\的作用是允许插入的文本换行。
c text #把选定行（或者选定的很多行）替换为目标行，text代表待替换的目标行。
c\ #把选定行（或者选定的很多行）替换为目标行，\的作用是允许替换的文本换行。
d #删除锁选择的行。
s/regexp/replacement/[flags] 替换指定字符。regexp代表匹配的正则表达式。replacement代表替换的内容。flags是可以选的，比如填g代表行内全面替换。
r filename #读取文件名
w file 写并追加模板块到file末尾。  
q [exit-code] #退出Sed。exit-code为匹配的退出标识。
```
### sed替换标记
下面列举了一些常用的sed替换标记
```shell
g #表示行内全面替换
p #表示打印行
w #表示把行写入一个文件
\1 子串匹配标记
& 已匹配的字符串标记
```

### sed元字符集
下面列举了一些常用的sed元字符集：
```shell
^ 匹配行开始，如：/^sed/匹配所有以sed开头的行。
$ 匹配行结束，如：/sed$/匹配所有以sed结尾的行。
. 匹配一个非换行符的任意字符，如：/s.d/匹配s后接一个任意字符，最后是d。
* 匹配0个或多个字符，如：/*sed/匹配所有模板是一个或多个空格后紧跟sed的行。
[] 匹配一个指定范围内的字符，如/[ss]ed/匹配sed和Sed。  
[^] 匹配一个不在指定范围内的字符，如：/[^A-RT-Z]ed/匹配不包含A-R和T-Z的一个字母开头，紧跟ed的行。
\(..\) 匹配子串，保存匹配的字符，如s/\(love\)able/\1rs，loveable被替换成lovers。
& 保存搜索字符用来替换其他字符，如s/love/**&**/，love这成**love**。
\< 匹配单词的开始，如:/\<love/匹配包含以love开头的单词的行。
\> 匹配单词的结束，如/love\>/匹配包含以love结尾的单词的行。
x\{m\} 重复字符x，m次，如：/0\{5\}/匹配包含5个0的行。
x\{m,\} 重复字符x，至少m次，如：/0\{5,\}/匹配至少有5个0的行。
x\{m,n\} 重复字符x，至少m次，不多于n次，如：/0\{5,10\}/匹配5~10个0的行。
```

### 常见用法示例
### q [exit-code]
表示退出`sed`，不再处理任何输入和指令。下文的例子就是在第二行退出sed。
```shell
$ seq 3 | sed 2q
1
2
```

#### d 删除指令
删除模式空间，并且立刻开始一个新的循环。由于sed按行来读取，所以删除的也就是一行。例如下面的例子删除第二行。
```shell
$ seq 3 | sed 2d
1
3
```

### p 打印模式空间到标准输出
打印模式空间到标准输出。这个指令经常和`-n`指令配合使用，例如只打印第二行。
```shell
$ seq 3 | sed -n 2p
2
```

### y/source-chars/dest-chars/ 直译指令
将所有在`source-chars`中匹配的字符替换成`dest-chars`对应位置的字符。
```shell
$ echo hello world | sed 'y/abcdefghij/0123456789/'
74llo worl3
```

### a text追加字符指令
在当前的行下面附加一行，text代表附加的文本。例如，在第二行下面追加hello字符串。
```shell
$ seq 3 | sed '2a hello'
1
2
hello
3
```

### a\ 追加字符指令
在当前的行下面附加一行，\的作用是允许插入的文本换行。下例是在第二行下面追加一行hello。
```shell
$ seq 3 | sed '2a\
hello'
-|1
-|2
-|hello
-|3
```